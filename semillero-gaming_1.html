<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>‚ö° Semillero Quest</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --neon-cyan:#00f5ff;
  --neon-magenta:#ff00ff;
  --neon-green:#39ff14;
  --neon-orange:#ff6b00;
  --neon-purple:#bf00ff;
  --dark:#0a0a0f;
  --dark2:#12121a;
  --dark3:#1a1a25;
}
body{
  font-family:'Rajdhani',sans-serif;
  background:var(--dark);
  min-height:100vh;
  color:#fff;
  overflow-x:hidden;
}
body::before{
  content:'';position:fixed;top:0;left:0;right:0;bottom:0;
  background:radial-gradient(ellipse at 50% 0%,rgba(0,245,255,.08) 0%,transparent 50%),
              radial-gradient(ellipse at 80% 80%,rgba(255,0,255,.05) 0%,transparent 40%),
              radial-gradient(ellipse at 20% 90%,rgba(57,255,20,.05) 0%,transparent 40%);
  pointer-events:none;z-index:0;
}

.app{display:flex;flex-direction:column;min-height:100vh;max-width:500px;margin:0 auto;position:relative;z-index:1}

/* Header */
.header{
  background:linear-gradient(180deg,rgba(18,18,26,.98) 0%,rgba(18,18,26,.9) 100%);
  backdrop-filter:blur(10px);
  border-bottom:1px solid rgba(0,245,255,.3);
  padding:16px 20px;
  position:sticky;top:0;z-index:50;
}
.header::after{
  content:'';position:absolute;bottom:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--neon-cyan),transparent);
  animation:glow-line 3s ease infinite;
}
@keyframes glow-line{
  0%,100%{opacity:.5}
  50%{opacity:1}
}
.header-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.brand{
  font-family:'Orbitron',monospace;
  font-size:12px;font-weight:700;
  color:var(--neon-cyan);
  text-shadow:0 0 10px var(--neon-cyan),0 0 20px var(--neon-cyan);
  letter-spacing:3px;
}
.level{
  font-family:'Orbitron',monospace;
  font-size:11px;
  color:var(--neon-green);
  text-shadow:0 0 8px var(--neon-green);
  display:flex;align-items:center;gap:6px;
}
.level::before{content:'‚ö°'}

/* XP Bar */
.xp-bar{height:8px;background:var(--dark3);border-radius:10px;overflow:hidden;position:relative;border:1px solid rgba(0,245,255,.2)}
.xp-fill{
  height:100%;
  background:linear-gradient(90deg,var(--neon-cyan),var(--neon-magenta));
  border-radius:10px;
  transition:width .5s ease;
  box-shadow:0 0 15px var(--neon-cyan);
  position:relative;
}
.xp-fill::after{
  content:'';position:absolute;top:0;left:0;right:0;bottom:0;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);
  animation:shine 2s ease infinite;
}
@keyframes shine{
  0%{transform:translateX(-100%)}
  100%{transform:translateX(100%)}
}

/* Progress Steps */
.progress-steps{display:flex;justify-content:center;gap:8px;margin-top:14px}
.step-dot{
  width:36px;height:36px;
  border-radius:10px;
  background:var(--dark3);
  border:2px solid rgba(255,255,255,.1);
  display:flex;align-items:center;justify-content:center;
  font-size:14px;
  transition:all .3s ease;
  cursor:pointer;
}
.step-dot.active{
  border-color:var(--neon-cyan);
  box-shadow:0 0 15px var(--neon-cyan),inset 0 0 15px rgba(0,245,255,.2);
  animation:pulse-glow 2s ease infinite;
}
.step-dot.completed{
  border-color:var(--neon-green);
  box-shadow:0 0 10px var(--neon-green);
}
@keyframes pulse-glow{
  0%,100%{box-shadow:0 0 15px var(--neon-cyan),inset 0 0 15px rgba(0,245,255,.2)}
  50%{box-shadow:0 0 25px var(--neon-cyan),inset 0 0 20px rgba(0,245,255,.3)}
}

/* Content */
.content{flex:1;overflow-y:auto;padding-bottom:110px}
.slide{padding:28px 20px;animation:fadeSlide .4s ease}
@keyframes fadeSlide{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* Character Box */
.character-box{
  width:120px;height:120px;
  margin:0 auto 24px;
  background:linear-gradient(135deg,var(--dark2),var(--dark3));
  border-radius:30px;
  border:2px solid rgba(0,245,255,.3);
  display:flex;align-items:center;justify-content:center;
  position:relative;
  box-shadow:0 0 30px rgba(0,245,255,.2),inset 0 0 30px rgba(0,245,255,.1);
}
.character-box::before{
  content:'';position:absolute;inset:-3px;
  border-radius:32px;
  background:linear-gradient(135deg,var(--neon-cyan),var(--neon-magenta),var(--neon-green));
  z-index:-1;
  opacity:.5;
  filter:blur(8px);
  animation:rotate-glow 4s linear infinite;
}
@keyframes rotate-glow{
  0%{filter:blur(8px) hue-rotate(0deg)}
  100%{filter:blur(8px) hue-rotate(360deg)}
}
.character-box svg{width:60px;height:60px}

/* Mission Badge */
.mission-badge{
  display:inline-flex;align-items:center;gap:8px;
  background:linear-gradient(135deg,rgba(0,245,255,.15),rgba(255,0,255,.1));
  border:1px solid rgba(0,245,255,.4);
  padding:8px 16px;
  border-radius:20px;
  font-family:'Orbitron',monospace;
  font-size:11px;font-weight:700;
  color:var(--neon-cyan);
  text-shadow:0 0 8px var(--neon-cyan);
  letter-spacing:2px;
}

/* Title */
.title{
  font-family:'Orbitron',monospace;
  font-size:24px;font-weight:900;
  text-align:center;
  margin:16px 0 8px;
  background:linear-gradient(135deg,#fff,var(--neon-cyan));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:none;
  line-height:1.3;
}
.subtitle{
  font-size:15px;
  color:rgba(255,255,255,.6);
  text-align:center;
  margin-bottom:24px;
}
.responsible-tag{
  display:inline-flex;align-items:center;gap:8px;
  background:var(--dark3);
  border:1px solid var(--neon-orange);
  padding:8px 16px;
  border-radius:12px;
  font-size:14px;
  color:var(--neon-orange);
  text-shadow:0 0 8px var(--neon-orange);
}

/* Role Cards - Intro */
.role-grid{display:flex;flex-direction:column;gap:14px;margin-top:24px}
.role-card{
  display:flex;align-items:center;gap:16px;
  background:linear-gradient(135deg,var(--dark2),var(--dark3));
  border:1px solid rgba(255,255,255,.1);
  border-radius:16px;
  padding:18px;
  transition:all .3s ease;
  cursor:pointer;
}
.role-card:hover{
  border-color:var(--neon-cyan);
  box-shadow:0 0 20px rgba(0,245,255,.2);
  transform:translateX(5px);
}
.role-icon{
  width:56px;height:56px;
  background:var(--dark);
  border-radius:14px;
  display:flex;align-items:center;justify-content:center;
  border:1px solid rgba(255,255,255,.1);
}
.role-icon svg{width:28px;height:28px}
.role-info h3{font-size:17px;font-weight:700;color:#fff}
.role-info p{font-size:12px;color:rgba(255,255,255,.5)}

/* Quest Items */
.quest-list{display:flex;flex-direction:column;gap:12px}
.quest-item{
  display:flex;align-items:flex-start;gap:14px;
  background:linear-gradient(135deg,var(--dark2),var(--dark3));
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
  padding:16px;
  transition:all .3s ease;
  position:relative;
  overflow:hidden;
}
.quest-item::before{
  content:'';position:absolute;left:0;top:0;bottom:0;width:3px;
  background:var(--neon-cyan);
  box-shadow:0 0 10px var(--neon-cyan);
}
.quest-item:hover{
  border-color:rgba(0,245,255,.3);
  transform:translateX(3px);
}
.quest-num{
  width:36px;height:36px;
  background:linear-gradient(135deg,var(--neon-cyan),var(--neon-magenta));
  border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  font-family:'Orbitron',monospace;
  font-size:14px;font-weight:700;
  color:#000;
  flex-shrink:0;
}
.quest-text{font-size:14px;color:rgba(255,255,255,.9);line-height:1.6;padding-top:4px}

/* Decision Panel */
.decision-panel{
  margin-top:28px;
  padding:20px;
  background:linear-gradient(135deg,rgba(0,245,255,.05),rgba(255,0,255,.05));
  border:1px solid rgba(0,245,255,.2);
  border-radius:20px;
}
.decision-title{
  font-family:'Orbitron',monospace;
  font-size:12px;font-weight:700;
  text-align:center;
  color:var(--neon-cyan);
  margin-bottom:16px;
  display:flex;align-items:center;justify-content:center;gap:10px;
}
.decision-btns{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.dec-btn{
  display:flex;flex-direction:column;align-items:center;gap:8px;
  padding:20px;
  border-radius:16px;
  font-weight:700;font-size:16px;
  cursor:pointer;
  border:2px solid rgba(255,255,255,.1);
  background:var(--dark2);
  color:#fff;
  transition:all .3s ease;
}
.dec-btn svg{width:32px;height:32px}
.dec-btn span{font-size:11px;color:rgba(255,255,255,.5);font-weight:500}
.dec-btn.yes:hover,.dec-btn.yes.active{
  border-color:var(--neon-green);
  background:rgba(57,255,20,.1);
  box-shadow:0 0 25px rgba(57,255,20,.3);
}
.dec-btn.yes.active svg{color:var(--neon-green)}
.dec-btn.no:hover,.dec-btn.no.active{
  border-color:var(--neon-orange);
  background:rgba(255,107,0,.1);
  box-shadow:0 0 25px rgba(255,107,0,.3);
}
.dec-btn.no.active svg{color:var(--neon-orange)}

/* Info Box */
.info-box{
  margin-top:16px;
  border-radius:16px;
  padding:18px;
  animation:fadeSlide .3s ease;
}
.info-box.success{
  background:linear-gradient(135deg,rgba(57,255,20,.1),rgba(0,245,255,.05));
  border:1px solid var(--neon-green);
}
.info-box.warning{
  background:linear-gradient(135deg,rgba(255,107,0,.1),rgba(255,0,0,.05));
  border:1px solid var(--neon-orange);
}
.info-title{
  font-family:'Orbitron',monospace;
  font-size:12px;font-weight:700;
  margin-bottom:12px;
  display:flex;align-items:center;gap:8px;
}
.info-title.green{color:var(--neon-green)}
.info-title.orange{color:var(--neon-orange)}
.info-text{color:rgba(255,255,255,.85);font-size:14px;line-height:1.6}

/* Victory Screen */
.victory{text-align:center}
.victory-badge{
  width:140px;height:140px;
  margin:0 auto 24px;
  background:linear-gradient(135deg,rgba(57,255,20,.2),rgba(0,245,255,.1));
  border:3px solid var(--neon-green);
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 0 40px rgba(57,255,20,.4),inset 0 0 30px rgba(57,255,20,.2);
  animation:victory-pulse 2s ease infinite;
}
@keyframes victory-pulse{
  0%,100%{box-shadow:0 0 40px rgba(57,255,20,.4),inset 0 0 30px rgba(57,255,20,.2)}
  50%{box-shadow:0 0 60px rgba(57,255,20,.6),inset 0 0 40px rgba(57,255,20,.3)}
}
.victory-badge svg{width:70px;height:70px;color:var(--neon-green)}
.victory-title{
  font-family:'Orbitron',monospace;
  font-size:28px;font-weight:900;
  color:var(--neon-green);
  text-shadow:0 0 20px var(--neon-green);
  margin-bottom:8px;
}
.victory-sub{color:rgba(255,255,255,.6);font-size:15px;margin-bottom:24px}
.reward-box{
  background:linear-gradient(135deg,var(--dark2),var(--dark3));
  border:2px solid var(--neon-green);
  border-radius:20px;
  padding:24px;
  margin-bottom:20px;
  box-shadow:0 0 30px rgba(57,255,20,.2);
}
.reward-emoji{font-size:50px;margin-bottom:12px}
.reward-title{font-size:18px;font-weight:700;color:#fff}
.reward-sub{font-size:13px;color:rgba(255,255,255,.5)}

/* Buttons */
.btn{
  width:100%;
  padding:18px;
  border-radius:14px;
  font-family:'Rajdhani',sans-serif;
  font-size:16px;font-weight:700;
  cursor:pointer;
  border:none;
  transition:all .3s ease;
  display:flex;align-items:center;justify-content:center;gap:10px;
  text-transform:uppercase;
  letter-spacing:1px;
}
.btn-primary{
  background:linear-gradient(135deg,var(--neon-cyan),var(--neon-magenta));
  color:#000;
  box-shadow:0 0 25px rgba(0,245,255,.4);
}
.btn-primary:active{transform:scale(.97);box-shadow:0 0 35px rgba(0,245,255,.6)}
.btn-secondary{
  background:var(--dark3);
  color:#fff;
  border:1px solid rgba(255,255,255,.2);
}
.btn-secondary:active{transform:scale(.97);border-color:var(--neon-cyan)}

/* Footer Nav */
.footer-nav{
  position:fixed;bottom:0;left:0;right:0;
  background:linear-gradient(180deg,rgba(10,10,15,.95),rgba(10,10,15,.98));
  backdrop-filter:blur(10px);
  border-top:1px solid rgba(0,245,255,.2);
  padding:16px 20px;
  padding-bottom:max(16px,env(safe-area-inset-bottom));
}
.footer-nav::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--neon-cyan),transparent);
}
.footer-inner{max-width:500px;margin:0 auto;display:flex;gap:12px}
.nav-btn{
  flex:1;padding:16px;
  border-radius:12px;
  font-family:'Rajdhani',sans-serif;
  font-size:15px;font-weight:700;
  cursor:pointer;border:none;
  display:flex;align-items:center;justify-content:center;gap:8px;
  transition:all .2s ease;
  text-transform:uppercase;
  letter-spacing:1px;
}
.nav-btn:disabled{opacity:.3;cursor:not-allowed}
.nav-prev{background:var(--dark3);color:rgba(255,255,255,.7);border:1px solid rgba(255,255,255,.1)}
.nav-next{
  background:linear-gradient(135deg,var(--neon-cyan),var(--neon-magenta));
  color:#000;
  box-shadow:0 0 20px rgba(0,245,255,.3);
}
.nav-btn:not(:disabled):active{transform:scale(.97)}
.icon{width:18px;height:18px}

/* Particles */
.particles{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
.particle{
  position:absolute;
  width:4px;height:4px;
  background:var(--neon-cyan);
  border-radius:50%;
  box-shadow:0 0 10px var(--neon-cyan);
  animation:float 15s infinite linear;
  opacity:.5;
}
@keyframes float{
  0%{transform:translateY(100vh) scale(0)}
  50%{opacity:1}
  100%{transform:translateY(-100px) scale(1);opacity:0}
}
</style>
</head>
<body>

<div class="particles" id="particles"></div>

<div class="app">
  <div class="header">
    <div class="header-top">
      <span class="brand">SEMILLERO</span>
      <span class="level" id="level">NIVEL 1</span>
    </div>
    <div class="xp-bar"><div class="xp-fill" id="xpFill" style="width:20%"></div></div>
    <div class="progress-steps" id="progressSteps"></div>
  </div>

  <div class="content" id="content"></div>

  <div class="footer-nav">
    <div class="footer-inner">
      <button class="nav-btn nav-prev" id="prevBtn" onclick="prev()">
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/></svg>
        Atr√°s
      </button>
      <button class="nav-btn nav-next" id="nextBtn" onclick="next()">
        Avanzar
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/></svg>
      </button>
    </div>
  </div>
</div>

<script>
// Create particles
var particlesDiv = document.getElementById('particles');
for (var i = 0; i < 20; i++) {
  var p = document.createElement('div');
  p.className = 'particle';
  p.style.left = Math.random() * 100 + '%';
  p.style.animationDelay = Math.random() * 15 + 's';
  p.style.animationDuration = (10 + Math.random() * 10) + 's';
  var colors = ['#00f5ff', '#ff00ff', '#39ff14'];
  p.style.background = colors[Math.floor(Math.random() * colors.length)];
  p.style.boxShadow = '0 0 10px ' + p.style.background;
  particlesDiv.appendChild(p);
}

// SVG Icons
var icons = {
  gamepad: '<svg viewBox="0 0 24 24" fill="none" stroke="url(#grad1)" stroke-width="1.5"><defs><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#00f5ff"/><stop offset="100%" style="stop-color:#ff00ff"/></linearGradient></defs><path d="M6 12h4M8 10v4M15.5 11h.01M18.5 13h.01"/><path d="M17.32 5H6.68a4 4 0 00-3.978 3.59l-.89 8A4 4 0 005.79 21h.89a1.5 1.5 0 001.323-.79l1.06-2.11a2 2 0 011.79-1.1h2.29a2 2 0 011.79 1.1l1.06 2.11a1.5 1.5 0 001.323.79h.89a4 4 0 003.978-4.41l-.89-8A4 4 0 0017.32 5z"/></svg>',
  target: '<svg viewBox="0 0 24 24" fill="none" stroke="#ff6b9d" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2" fill="#ff6b9d"/><path d="M12 2v4M12 18v4M2 12h4M18 12h4" stroke="#00f5ff"/></svg>',
  chat: '<svg viewBox="0 0 24 24" fill="none" stroke="#a78bfa" stroke-width="1.5"><path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"/></svg>',
  swords: '<svg viewBox="0 0 24 24" fill="none" stroke="#a78bfa" stroke-width="1.5"><path d="M14.5 17.5L3 6V3h3l11.5 11.5M13 19l6-6M3 3l7.5 7.5"/><path d="M9.5 6.5L3 13V16h3l6.5-6.5M11 5l6 6M21 3l-7.5 7.5" stroke="#ff6b9d"/></svg>',
  check: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>',
  x: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>',
  home: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>',
  trophy: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M8 21h8M12 17v4M7 4h10M7 4c0 0-3 0-3 4 0 3 3 4 3 4M17 4c0 0 3 0 3 4 0 3-3 4-3 4M7 12c0 3 2.5 5 5 5s5-2 5-5V4H7v8z"/></svg>'
};

var slides = [
  {
    id: 'intro',
    icon: 'gamepad',
    title: 'Proceso de Postulaci√≥n',
    subtitle: 'Misi√≥n: Semillero',
    content: 'Completa todas las etapas para desbloquear el acceso al programa de formaci√≥n',
    isIntro: true
  },
  {
    id: 'step1',
    step: 1,
    icon: 'target',
    title: 'Evaluaci√≥n inicial por parte del l√≠der',
    responsible: 'L√≠der',
    actions: [
      'Cuando el l√≠der considera que la persona est√° apta para postularse al semillero, debe ingresar a la p√°gina de la Iglesia, dirigirse a la secci√≥n Cuentas y luego a Red Celular.',
      'All√≠ deber√° diligenciar el formulario llamado "Checklist Postulaci√≥n Semillero", completando toda la informaci√≥n solicitada.'
    ],
    hasDecision: true,
    yesText: 'Si el l√≠der considera que el candidato cumple todos los filtros, deber√° notificar al coordinador para que contin√∫e con la siguiente etapa: la entrevista.',
    noText: 'En caso de que el l√≠der identifique alg√∫n aspecto que no permita aprobar la postulaci√≥n, debe informarlo al coordinador. Esto permitir√° definir las √°reas que la persona debe fortalecer antes de postularse nuevamente, quedando para un siguiente proceso de semillero.'
  },
  {
    id: 'step2',
    step: 2,
    icon: 'chat',
    title: 'Entrevista del coordinador',
    responsible: 'Coordinador',
    actions: [
      'Una vez el coordinador realiza la entrevista, deber√° ingresar nuevamente a la p√°gina (Cuentas ‚Üí Red Celular).',
      'Diligenciar el mismo formulario "Checklist Postulaci√≥n Semillero", esta vez con la informaci√≥n obtenida durante la entrevista.'
    ],
    hasDecision: true,
    yesText: 'Si el resultado del checklist indica que el candidato puede avanzar, el coordinador compartir√° la informaci√≥n con los l√≠deres de red para que ellos tambi√©n entrevisten a la persona postulada.',
    noText: 'Si el candidato no cumple alg√∫n criterio, se debe informar para definir las √°reas que debe fortalecer antes de postularse nuevamente, quedando para un siguiente proceso de semillero.'
  },
  {
    id: 'step3',
    step: 3,
    icon: 'swords',
    title: 'Validaci√≥n por l√≠deres de red',
    responsible: 'L√≠deres de Red',
    actions: [
      'Los l√≠deres de red entrevistan a la persona postulada.',
      'Si los l√≠deres de red consideran que el candidato est√° listo, deber√°n volver a diligenciar el formulario "Checklist Postulaci√≥n Semillero".'
    ],
    hasDecision: true,
    yesText: 'Con este √∫ltimo registro, Red Celular recibir√° la confirmaci√≥n formal de que la persona puede iniciar el proceso de semillero.',
    noText: 'Si el candidato a√∫n no est√° listo, se definir√°n las √°reas a fortalecer para un siguiente proceso de semillero.'
  },
  {
    id: 'final',
    icon: 'trophy',
    title: '¬°APROBADO!',
    subtitle: 'Evaluaci√≥n Final Completada',
    content: 'Red Celular recibe la confirmaci√≥n formal de que la persona puede iniciar el proceso de semillero.',
    isFinal: true
  }
];

var current = 0;
var decisions = {};

// Swipe
var touchStartX = 0;
document.addEventListener('touchstart', function(e) { touchStartX = e.changedTouches[0].screenX; });
document.addEventListener('touchend', function(e) {
  var diff = touchStartX - e.changedTouches[0].screenX;
  if (diff > 60) next();
  if (diff < -60) prev();
});

function render() {
  var s = slides[current];
  
  // XP & Level
  var xp = ((current + 1) / slides.length * 100);
  document.getElementById('xpFill').style.width = xp + '%';
  document.getElementById('level').textContent = 'NIVEL ' + (current + 1);
  
  // Progress Steps
  var stepsHtml = '';
  var stepIcons = ['üéÆ','üéØ','üí¨','‚öîÔ∏è','üèÜ'];
  for (var i = 0; i < slides.length; i++) {
    var cls = i < current ? 'completed' : (i === current ? 'active' : '');
    stepsHtml += '<div class="step-dot ' + cls + '" onclick="goTo(' + i + ')">' + stepIcons[i] + '</div>';
  }
  document.getElementById('progressSteps').innerHTML = stepsHtml;
  
  // Buttons
  document.getElementById('prevBtn').disabled = current === 0;
  document.getElementById('nextBtn').disabled = current === slides.length - 1;
  
  // Content
  var html = '<div class="slide">';
  html += '<div class="character-box">' + icons[s.icon] + '</div>';
  
  if (s.step) {
    html += '<div style="text-align:center"><span class="mission-badge">PASO ' + s.step + '</span></div>';
  }
  
  html += '<h1 class="title">' + s.title + '</h1>';
  
  if (s.responsible) {
    html += '<p class="subtitle"><span class="responsible-tag">üéÆ Responsable: ' + s.responsible + '</span></p>';
  } else if (s.subtitle) {
    html += '<p class="subtitle">' + s.subtitle + '</p>';
  }
  
  // Intro
  if (s.isIntro) {
    html += '<p style="text-align:center;color:rgba(255,255,255,.6);margin-bottom:40px">' + s.content + '</p>';
    html += '<button class="btn btn-primary" onclick="next()">üöÄ INICIAR MISI√ìN</button>';
  }
  
  // Final
  if (s.isFinal) {
    html += '<div class="victory">';
    html += '<div class="victory-badge">' + icons.check + '</div>';
    html += '<h2 class="victory-title">¬°COMPLETADO!</h2>';
    html += '<p class="victory-sub">' + s.content + '</p>';
    html += '<div class="reward-box"><div class="reward-emoji">üå±</div><div class="reward-title">Recompensa Desbloqueada</div><div class="reward-sub">Acceso al programa Semillero</div></div>';
    html += '<button class="btn btn-secondary" onclick="goTo(0)">' + icons.home + ' REINICIAR</button>';
    html += '</div>';
  }
  
  // Actions
  if (s.actions) {
    html += '<div class="quest-list">';
    for (var a = 0; a < s.actions.length; a++) {
      html += '<div class="quest-item"><div class="quest-num">' + (a + 1) + '</div><div class="quest-text">' + s.actions[a] + '</div></div>';
    }
    html += '</div>';
  }
  
  // Decision
  if (s.hasDecision) {
    var dec = decisions[s.id] || 'yes';
    html += '<div class="decision-panel">';
    html += '<div class="decision-title">‚ö° ¬øEL CANDIDATO CUMPLE LOS CRITERIOS?</div>';
    html += '<div class="decision-btns">';
    html += '<button class="dec-btn yes' + (dec === 'yes' ? ' active' : '') + '" onclick="setDec(\'' + s.id + '\',\'yes\')">' + icons.check + 'S√ç<span>Avanza</span></button>';
    html += '<button class="dec-btn no' + (dec === 'no' ? ' active' : '') + '" onclick="setDec(\'' + s.id + '\',\'no\')">' + icons.x + 'NO<span>Plan de mejora</span></button>';
    html += '</div>';
    
    if (dec === 'yes' && s.yesText) {
      html += '<div class="info-box success">';
      html += '<div class="info-title green">‚úÖ SIGUIENTE PASO</div>';
      html += '<p class="info-text">' + s.yesText + '</p>';
      html += '</div>';
    }
    
    if (dec === 'no' && s.noText) {
      html += '<div class="info-box warning">';
      html += '<div class="info-title orange">‚ö†Ô∏è PLAN DE MEJORA</div>';
      html += '<p class="info-text">' + s.noText + '</p>';
      html += '</div>';
    }
    html += '</div>';
  }
  
  html += '</div>';
  document.getElementById('content').innerHTML = html;
}

function next() { if (current < slides.length - 1) { current++; render(); document.getElementById('content').scrollTop = 0; } }
function prev() { if (current > 0) { current--; render(); document.getElementById('content').scrollTop = 0; } }
function goTo(i) { current = i; render(); document.getElementById('content').scrollTop = 0; }
function setDec(id, val) { decisions[id] = val; render(); }

render();
</script>
</body>
</html>
